






<!doctype html>
<html>
<head>
<title>solr安装启动及可视化界面介绍_comonly.cn</title>
<meta name="keywords" content="solr安装启动及可视化界面介绍" />
<meta name="description" content="下载地址：https://www-us.apache.org/dist/lucene/solr/ 解压下载的压缩包放到自己指定的位置即可完成Solr安装。在命令行中路径切换到solr目录的bin下，执行启动命令即可启动solr。（Solr默认端口为8983）" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="/css/css_yangqingqing.css" rel="stylesheet">
</head>
<body>
<div class="box">
 <div class="blank"></div>
 <div class="infosbox">
    <div class="newsview">
      <h3 class="news_title">solr安装启动及可视化界面介绍</h3>
      <div class="bloginfo">
        <ul>
          <li class="author">风中漫步者</li>
          <li class="lmname"><a href="https://blog.csdn.net/qwqw3333333/article/details/84333510" target="_blank">https://blog.csdn.net/qwqw3333333/article/details/84333510</a></li>
          <li class="timer">2019-03-27</li>
          	
         
          
          <!-- origin -->
		  <li class="view">
 

	服务器apache等
 	  	
		  </li>		  
		  <li class="view">公开</li>

 
          <!-- 
          <li class="view">4567已阅读</li>
          <li class="like">8888888</li>
           -->
        </ul>
      </div>
      
      
        <div class="news_about"><strong>简介</strong>下载地址：https://www-us.apache.org/dist/lucene/solr/ 解压下载的压缩包放到自己指定的位置即可完成Solr安装。在命令行中路径切换到solr目录的bin下，执行启动命令即可启动solr。（Solr默认端口为8983）</div>
      
      <!-- <div class="news_con"> -->
      <div class="realContent_kindeditor"> <span> 
<p>
	下载地址：<a href="https://www-us.apache.org/dist/lucene/solr/" target="_blank">https://www-us.apache.org/dist/lucene/solr/</a> 解压下载的压缩包放到自己指定的位置即可完成Solr安装。在命令行中路径切换到solr目录的bin下，执行启动命令即可启动solr。（Solr默认端口为8983）
</p>
</span></div>
      <!-- 
      <p class="diggit">
        <a href="JavaScript:makeRequest('/e/public/digg/?classid=3&amp;id=19&amp;dotop=1&amp;doajax=1&amp;ajaxarea=diggnum','EchoReturnedText','GET','');"> 很赞哦！ </a>(<b id="diggnum"><script type="text/javascript" src="/e/public/ViewClick/?classid=2&amp;id=20&amp;down=5"></script>13</b>)
      </p>
       -->

    </div>
    
    <div class="nextinfo">
      
        
        
            <p>上一篇：<a href="/p/1090.html">SpringMVC的controller向jsp传递数据的五种方式详解【转待处理】</a></p>
        
        
      
      
        
        
            <p>下一篇：<a href="/p/1092.html">solr在Java中使用</a></p>
        
      
    </div>
    
    <!-- 转载声明 -->
    
        <div style="padding-left:20px;">本文转自：<a href="https://blog.csdn.net/qwqw3333333/article/details/84333510" target="_blank">https://blog.csdn.net/qwqw3333333/article/details/84333510</a></div>
    
	
	<div><!-- 添加新的评论 -->
		
   
		
		<div class="news_pl">
		    <h2>文章评论</h2>	
		  	
				<ul>
					<div class="gbko">
						<span id="solr常用命令">
							<h2 style="display:inline;color:#5BC648;">solr常用命令</h2>
							&nbsp;&nbsp;&nbsp;&nbsp;2019-03-27&nbsp;&nbsp;&nbsp;&nbsp;
								
						</span><!-- 标题，时间 -->
						
						<br/>
						<span><p>
	启动停止Solr
</p>
<pre class="prettyprint lang-bsh">#后台启动Solr服务器，默认端口8983，默认主目录server/solr
solr start
#前台启动Solr服务器
solr start -f
#SolrCloud模式启动Solr，如果-z没有指明或ZK_HOST没有在solr.in.cmd中定义，默认使用一个端口为Solr port+1000的嵌入式Zookeeper实例。
solr start -c 或者 solr start -cloud
#指定Solr服务器实例的host名
solr start -h mysolr
#指定solr http监听端口，
solr start -p 8984
#指明Solr服务的目录，默认是server
solr start -d dir/
#指明Zookeeper的Host
solr start -z 192.168.1.198:22222
#指定内存的最大和最小使用量。如-m 4g代表-Xms4g -Xmx4g
solr start -m 4g
#指定主目录路径
solr start -s evendir/
#指定索引存储路径
solr start -t  dir/
#停止solr服务器
solr stop -p port
#停止所有solr服务器
solr stop -all</pre>
<p>
	创建内核
</p>
<pre class="prettyprint lang-bsh">#创建内核
solr create -c corename
#指定配置文件目录
solr create -c corename -d confdir/
#指定solr服务器的监听端口
solr create -c corename -p 8983
#支持详细输出级别
solr create -c corename -v info</pre>
<p>
	删除内核
</p>
<pre class="prettyprint lang-bsh">#删除内核
solr delete -c corename
#删除内核时把Zookeeper上的配置也一起删除，布尔类型，默认为true
solr delete -c corename -deleteConfig 0 #删除指定端口的内核，如果没有指定，则会搜索本地系统正在运行的solr实例，用第一个找到的实例的端口
solr delete -c corename -p 8985
#打印详细信息
solr delete -c corename -v info</pre></span><!-- 内容 -->
					</div>
	      		</ul>
			
				<ul>
					<div class="gbko">
						<span id="创建核心">
							<h2 style="display:inline;color:#5BC648;">创建核心</h2>
							&nbsp;&nbsp;&nbsp;&nbsp;2019-03-27&nbsp;&nbsp;&nbsp;&nbsp;
								
						</span><!-- 标题，时间 -->
						
						<br/>
						<span><p>
	每个核心都是solr的一个实例，一个solr服务可以创建多个核心，每个核心都可以进行自己独立配置。在<span>solr_home\server\solr</span>目录下创建一个文件夹（比如new_core），文件夹名称与核心名称相同。将solr_home\server\solr\configsets_default路径下的conf文件夹复制到new_core目录下。bin目录下输入命令：
</p>
<pre class="prettyprint lang-bsh"> solr create –c new_core</pre>
<p>
	也可以通过可视化界面创建。
</p></span><!-- 内容 -->
					</div>
	      		</ul>
			
				<ul>
					<div class="gbko">
						<span id="配置中文分词器">
							<h2 style="display:inline;color:#5BC648;">配置中文分词器</h2>
							&nbsp;&nbsp;&nbsp;&nbsp;2019-03-27&nbsp;&nbsp;&nbsp;&nbsp;
								
						</span><!-- 标题，时间 -->
						
						<br/>
						<span><p>
	转自：Solr7.7安装，配置中文分词 IKAnalyzer分词<a href="https://www.cnblogs.com/caleyun/p/10455985.html" target="_blank">https://www.cnblogs.com/caleyun/p/10455985.html</a> 
</p>
<p>
	下载中文分词器IKAnalyzer，下载地址<a href="https://pan.baidu.com/s/18J-ssX2IALz87oZYvjFzvw" target="_blank">https://pan.baidu.com/s/18J-ssX2IALz87oZYvjFzvw</a>，密码：igt9。
</p>
<p>
	1. 解压压缩包包，将ik-analyzer-7.7.0.jar包放入/soft/solr-7.7.0/server/solr-webapp/webapp/WEB-INF/lib/目录下
</p>
<p>
	2. 将resources目录下的5个配置文件放入soft/solr-7.7.0/server/solr-webapp/webapp/WEB-INF/classes/目录下：
</p>
<blockquote>
	<p>
		① IKAnalyzer.cfg.xml
	</p>
	<p>
		② ext.dic
	</p>
	<p>
		③ stopword.dic
	</p>
	<p>
		④ ik.conf
	</p>
	<p>
		⑤ dynamicdic.txt
	</p>
</blockquote>
<p>
	3. 配置Solr的managed-schema，添加ik分词器，示例如下；
</p>
<pre class="prettyprint lang-xml">&lt;!-- ik分词器 --&gt; &lt;fieldType name="text_ik" class="solr.TextField"&gt;
  &lt;analyzer type="index"&gt;
      &lt;tokenizer class="org.wltea.analyzer.lucene.IKTokenizerFactory" useSmart="false" conf="ik.conf"/&gt;
      &lt;filter class="solr.LowerCaseFilterFactory"/&gt;
  &lt;/analyzer&gt;
  &lt;analyzer type="query"&gt;
      &lt;tokenizer class="org.wltea.analyzer.lucene.IKTokenizerFactory" useSmart="true" conf="ik.conf"/&gt;
      &lt;filter class="solr.LowerCaseFilterFactory"/&gt;
  &lt;/analyzer&gt;
&lt;/fieldType&gt;</pre></span><!-- 内容 -->
					</div>
	      		</ul>
			
				<ul>
					<div class="gbko">
						<span id="导入索引数据（MySQL数据库）">
							<h2 style="display:inline;color:#5BC648;">导入索引数据（MySQL数据库）</h2>
							&nbsp;&nbsp;&nbsp;&nbsp;2019-03-27&nbsp;&nbsp;&nbsp;&nbsp;
								
						</span><!-- 标题，时间 -->
						
						<br/>
						<span>1. 在路径solr_home\server\solr\new_core\conf下新建my-data-config.xml文件。
<pre class="prettyprint lang-xml">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;dataConfig&gt;
    &lt;dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/solr_test"
                user="root" password=""/&gt;
    &lt;document&gt;
        &lt;entity name="user" query="select * from user"&gt;
            &lt;field column="id" name="id"/&gt;
            &lt;field column="age" name="age"/&gt;
            &lt;field column="name" name="name"/&gt; &lt;field column="hobby" name="hobby"/&gt;
        &lt;/entity&gt;
    &lt;/document&gt;
&lt;/dataConfig&gt;</pre>
2. 用solr添加数据库字段对应的索引字段，其中type指定分词方式，在查询时会按type指定的方式处理。其中后4个字段是core初始化自带的（不能重复添加，可以将数据库字段存为其他名字）。在可视化界面添加后打开managed-schema文件会看到：<br />
<pre class="prettyprint lang-js">&lt;field name="name" type="text_ik" indexed="true" stored="true"/&gt;
&lt;field name="age" type="pint" indexed="true" stored="true"/&gt;
&lt;field name="hobby" type="string" indexed="true" stored="true"/&gt;
&lt;field name="_root_" type="string" docValues="false" indexed="true" stored="false"/&gt;
&lt;field name="_text_" type="text_general" multiValued="true" indexed="true" stored="false"/&gt;
&lt;field name="_version_" type="plong" indexed="false" stored="false"/&gt;
&lt;field name="id" type="string" multiValued="false" indexed="true" required="true" stored="true"/&gt;</pre>
<span style="color:#E53333;">在添加field时如果选中</span><span style="color:#E53333;"></span><span style="color:#E53333;">uninvertible</span><span style="color:#E53333;">，在查询时需要分词完全匹配该字段的内容。</span><br />
<br />
3. 打开该路径下文件：solr_home\server\solr\new_core\conf\solrconfig.xml，随便找一个与requestHandler同级节点上添加以下配置：<br />
<pre class="prettyprint lang-js">&lt;requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler"&gt;
    &lt;lst name="defaults"&gt;
        &lt;str name="config"&gt;my-data-config.xml&lt;/str&gt;
    &lt;/lst&gt; &lt;/requestHandler&gt;</pre>
将solr_home\dist 目录下的solr-dataimporthandler-7.5.0.jar和MySQL驱动（随便找个MySQL驱动）复制到solr_home\server\solr-webapp\webapp\WEB-INF\lib 目录下。重启solr服务，在可视化界面下通过 dataimport 导入数据。<br /></span><!-- 内容 -->
					</div>
	      		</ul>
			
				<ul>
					<div class="gbko">
						<span id="core/conf/managed-schema文件">
							<h2 style="display:inline;color:#5BC648;">core/conf/managed-schema文件</h2>
							&nbsp;&nbsp;&nbsp;&nbsp;2019-03-27&nbsp;&nbsp;&nbsp;&nbsp;
								
						</span><!-- 标题，时间 -->
						
						<br/>
						<span><span>三、schame</span><br />
<span>schame文件可以对索引库的数据类型进行定义，对字段是否进行索引、储存等进行设置，要针对核心单独进行配置。</span><br />
<span>schame的数据类型基本够用，如果不能满足需求，比如说对中文分词、拼音分词等，就可以自定义分词器。</span><br />
<span>Solr 7.5的schema配置文件名为managed-schema，路径为solr_home\server\solr\new_core\conf\managed-schema（D:\Program Files\solr-7.5.0\server\solr\new_core\conf\managed-schema）。</span><br />
<br />
<span>3.1 schema主要成员</span><br />
<span>（1） fieldType：为field定义类型，最主要作用是定义分词器，分词器决定着如何从文档中检索关键字。</span><br />
<span>（2） analyzer：fieldType的子元素，是分词器，由tokenizer和filter组成。例如</span><br />
<span>（3） field：字段，用来创建索引,如果这个字段需要生成索引，则需要设置的indexed为true，需要存储设置stored属性为true。例如：</span><br />
<br />
<span>3.2 添加索引字段</span><br />
<span>方式一：直接修改managed-schema配置文件（不推荐，修改后需要重启服务），例如：</span><br />
<br />
<span>方式二：通过solr页面进行添加。（推荐，不需要重启服务）</span><br />
<span></span></span><!-- 内容 -->
					</div>
	      		</ul>
			
				<ul>
					<div class="gbko">
						<span id="core/conf/solrconfig.xml文件">
							<h2 style="display:inline;color:#5BC648;">core/conf/solrconfig.xml文件</h2>
							&nbsp;&nbsp;&nbsp;&nbsp;2019-03-27&nbsp;&nbsp;&nbsp;&nbsp;
								
						</span><!-- 标题，时间 -->
						
						<br/>
						<span></span><!-- 内容 -->
					</div>
	      		</ul>
			
				<ul>
					<div class="gbko">
						<span id="面板使用">
							<h2 style="display:inline;color:#5BC648;">面板使用</h2>
							&nbsp;&nbsp;&nbsp;&nbsp;2019-03-27&nbsp;&nbsp;&nbsp;&nbsp;
								
						</span><!-- 标题，时间 -->
						
						<br/>
						<span><p>
	https://blog.csdn.net/weixin_37581297/article/details/86571986
</p>
<p>
	https://www.cnblogs.com/zhangweizhong/p/5056884.html
</p></span><!-- 内容 -->
					</div>
	      		</ul>
			
				<ul>
					<div class="gbko">
						<span id="solr英文使用的基本分词器和过滤器配置">
							<h2 style="display:inline;color:#5BC648;">solr英文使用的基本分词器和过滤器配置</h2>
							&nbsp;&nbsp;&nbsp;&nbsp;2019-04-29&nbsp;&nbsp;&nbsp;&nbsp;
								
						</span><!-- 标题，时间 -->
						
						<br/>
						<span><p>
	https://kobe-hz.iteye.com/blog/1828012
</p>
<p>
	https://www.cnblogs.com/a198720/p/3568850.html
</p></span><!-- 内容 -->
					</div>
	      		</ul>
			
		</div>
	
	</div>

 
 		
	</div>

</div>

<div class="blank"></div>

	<div  style="position: fixed;display: float;top: 2px;right: 2px;width: 200px;"><!-- 评论部分 -->

		<!---->
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#"></a></span><!-- 标题列表，快速查看-->
			</div>
		
		
	
		评论列表
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#solr常用命令">solr常用命令</a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#创建核心">创建核心</a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#配置中文分词器">配置中文分词器</a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#导入索引数据（MySQL数据库）">导入索引数据（MySQL数据库）</a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#core/conf/managed-schema文件">core/conf/managed-schema文件</a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#core/conf/solrconfig.xml文件">core/conf/solrconfig.xml文件</a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#面板使用">面板使用</a></span><!-- 标题列表，快速查看-->
			</div>
		
			<div>
				<span style="display:block;margin:10px;"><a style="text-decoration:none;color:#5BC648;" href="#solr英文使用的基本分词器和过滤器配置">solr英文使用的基本分词器和过滤器配置</a></span><!-- 标题列表，快速查看-->
			</div>
		
	</div>

	<link href="/extends/kindeditor-4.1.10/plugins/code/prettify.css" rel="stylesheet" type="text/css"></script>
	<script charset="utf-8" src="/extends/kindeditor-4.1.10/plugins/code/prettify.js"></script>
	<script type="text/javascript">
	prettyPrint();
	</script>

<!-- 显示访问记录 -->

	<footer>
		<!-- 底部居中的 -->
		<p>Copyright © <a href="http://comonly.cn/" target="_blank">comonly.cn</a> </p>
		<p>备案号：<a href="http://www.miitbeian.gov.cn/">鄂ICP备16003690号-3</a></p>
		<div class="cnzz_bot">
			<style>
			.cnzz_bot img{
			    margin:0 auto;
			}
			</style>
			<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1277884732'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1277884732%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
		</div>
	</footer>

 
</body>
</html>
